datasource db {
    provider = "mysql"
    url      = env("DATABASE_URL")
}

enum Status {
    active
    pending
    disabled
    declined
}

model Lesson {
    id              String          @id
    published       String
    name            String
    info            String          @db.Text
    thumb           String          @db.Text
    pdf             String?
    likes           User[]
    views           Int             @default(0)
    downloads       User[]          @relation(name: "downloads-relation")

    media_id        String          @unique
    media           Media           @relation(fields: [media_id], references: [id], onDelete: Cascade)
    status          Status          @default(pending)
    declined_reason String?
}

model Media {
    id          String          @id
    lesson_id   String?
    lesson      Lesson?
}

model User {
    id                  String          @id
    lessons_likes       Lesson[]
    lessons_downloads   Lesson[]        @relation(name: "downloads-relation")
}
